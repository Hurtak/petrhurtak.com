(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{7946:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/_common-sw-architecture-mistakes",function(){return n(9607)}])},6482:function(e,t,n){"use strict";n.d(t,{Br:function(){return i.Br},EK:function(){return i.EK},Ee:function(){return i.Ee},H1:function(){return i.H1},H2:function(){return i.H2},HO:function(){return i.HO},Li:function(){return i.Li},P:function(){return i.P},S0:function(){return i.S0},Tc:function(){return i.Tc},Tr:function(){return i.Tr},Tx:function(){return i.Tx},_P:function(){return i._P},aV:function(){return i.aV},cK:function(){return i.cK},iA:function(){return i.iA},nk:function(){return i.nk},pu:function(){return i.pu},rU:function(){return i.rU},z1:function(){return i.z1}});var i=n(9465)},7776:function(e,t,n){"use strict";n.d(t,{x:function(){return g}});var i=n(5893),s=n(645),r=n.n(s),a=n(9008),c=n.n(a),o=n(8422),l=n(7001),d=n(191),h=n(4047);let u=()=>(0,i.jsx)(i.Fragment,{children:"\xb7"});var m=n(9829);let f=e=>e.format("YYYY-MMM-DD"),p=e=>{let{articleBlog:t,articleComponent:n}=e,s=l.h.utc(t.datePublication),a=t.dateLastUpdate?l.h.utc(t.dateLastUpdate):void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.$,{title:t.title}),(0,i.jsx)(c(),{children:(0,i.jsx)("meta",{name:"description",content:t.description,className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])})}),(0,i.jsxs)("article",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]]),children:[(0,i.jsx)("h1",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]]),children:t.title}),(0,i.jsx)("p",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])+" time-wrapper",children:a?(0,i.jsxs)(i.Fragment,{children:["Published"," ",(0,i.jsx)("time",{title:"Publication date",dateTime:s.toISOString(),className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]]),children:f(s)}),(0,i.jsx)("br",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])}),"Updated:"," ",(0,i.jsx)("time",{title:"Last update date",dateTime:a.toISOString(),className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]]),children:f(a)})]}):(0,i.jsx)("time",{title:"Publication date",dateTime:s.toISOString(),className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]]),children:f(s)})}),(0,i.jsx)("div",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])+" article-content",children:(0,i.jsx)(n,{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])})})]}),(0,i.jsxs)("p",{className:r().dynamic([["9afce2f4c51a17ad",[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)]]])+" links",children:[(0,i.jsx)(m.r,{href:o._j.articleGitHubLink(t.articleDirectory),children:"Edit on GitHub"})," ",(0,i.jsx)(u,{})," ",(0,i.jsx)(m.r,{href:o._j.articleXSearch(t.slug),children:"Discuss on X"})," "]}),(0,i.jsx)(r(),{id:"9afce2f4c51a17ad",dynamic:[(0,d.LH)(.5),(0,d.LH)(5),(0,d.LH)(2),(0,d.LH)(3)],children:"h1.__jsx-style-dynamic-selector{margin:0}.time-wrapper.__jsx-style-dynamic-selector{margin:0}time.__jsx-style-dynamic-selector{display:inline-block;padding-top:".concat((0,d.LH)(.5),"}.article-content.__jsx-style-dynamic-selector{padding-top:").concat((0,d.LH)(5),"}.article-content.__jsx-style-dynamic-selector>*{margin:").concat((0,d.LH)(2)," 0}.article-content.__jsx-style-dynamic-selector>*:first-child{margin-top:0}.article-content.__jsx-style-dynamic-selector>*:last-child{margin-bottom:0}.links.__jsx-style-dynamic-selector{margin:0;margin-top:").concat((0,d.LH)(3),"}")})]})},g=e=>t=>{let{articleBlog:n}=t;return(0,i.jsx)(p,{articleBlog:n,articleComponent:e})}},9607:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return a},default:function(){return c}});var i=n(5893),s=n(6482),r=n(7776),a=!0,c=(0,r.x)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.P,{children:"Over the years I have reviewed many pull requests, mainly on projects of ~10 people where not all of team members. Here is collection of the most common mistakes I have seen or made by myself on front-end related projects."}),(0,i.jsx)(s.H1,{children:"1. Large never ending pull requests"}),(0,i.jsx)(s.P,{children:"This is probably the most common, it usually goes like this"}),(0,i.jsxs)(s.aV,{children:[(0,i.jsx)(s.Li,{children:"You get large product task, you work on it for weeks."}),(0,i.jsx)(s.Li,{children:"You start getting behind, product starts asking when it will be done, so you start cranking more code with less quality."}),(0,i.jsxs)(s.Li,{children:["You ",(0,i.jsx)(s.pu,{children:"finish"})," the task and tell on standup that it is done and just needs review."]}),(0,i.jsx)(s.Li,{children:"Architects or senior members start reviewing the PR, it takes a long time (because it is super large) and they request lots of changes (because it is super large)."}),(0,i.jsxs)(s.Li,{children:["You start addressing the changes and you will keep saying on standup that it is almost done",(0,i.jsx)(s.HO,{})," for another week or two."]}),(0,i.jsx)(s.Li,{children:"Nobody is happy."})]}),(0,i.jsx)(s.H2,{children:"How to prevent this"}),(0,i.jsxs)(s.aV,{children:[(0,i.jsxs)(s.Li,{children:[(0,i.jsx)(s.cK,{children:"Split the product tasks"})," into smaller deliverables. Talk with product if it would make sens to deliver the task not all at once but with smaller deliverables.",(0,i.jsxs)(s.aV,{children:[(0,i.jsxs)(s.Li,{children:["Dont",(0,i.jsx)(s.aV,{children:(0,i.jsx)(s.Li,{children:"Profile screen task (one large task with lots of functionality)"})})]}),(0,i.jsxs)(s.Li,{children:["Do",(0,i.jsxs)(s.aV,{children:[(0,i.jsx)(s.Li,{children:"Profile screen with basic information"}),(0,i.jsx)(s.Li,{children:"Profile screen logout button"}),(0,i.jsx)(s.Li,{children:"Profile screen change password"})]})]})]})]}),(0,i.jsxs)(s.Li,{children:[(0,i.jsx)(s.cK,{children:"Split the code"})," into several PRs. Either have the PRs as small product deliverables, if that is not possible,",(0,i.jsx)(s.cK,{children:"introduce feature-flag"}),", which will allow you to merge to main without affecting the product (eg users seeing partially implemented profile page).",(0,i.jsxs)(s.aV,{children:[(0,i.jsxs)(s.Li,{children:["Dont",(0,i.jsx)(s.aV,{children:(0,i.jsx)(s.Li,{children:"One profile screen PR with 5000 lines of changes"})})]}),(0,i.jsxs)(s.Li,{children:["Do",(0,i.jsxs)(s.aV,{children:[(0,i.jsx)(s.Li,{children:"PR 1: Profile screen shell with feature flag"}),(0,i.jsx)(s.Li,{children:"PR 2: Layout refactoring needed for the profile screen"}),(0,i.jsx)(s.Li,{children:"PR 3: Profile screen layout and basic data"}),(0,i.jsx)(s.Li,{children:"PR 4: Implement logout logic"}),(0,i.jsx)(s.Li,{children:"PR 5: Profile screen logout button"}),(0,i.jsx)(s.Li,{children:"PR 6: Add PasswordInput component"}),(0,i.jsx)(s.Li,{children:"PR 7: Profile screen password change"}),(0,i.jsx)(s.Li,{children:"PR 8: Profile screen enabled by removing feature flag"})]})]})]})]}),(0,i.jsxs)(s.Li,{children:[(0,i.jsx)(s.cK,{children:"Talk with someone experienced"})," on the team about the task (ideally before you start working on the task), they will most likely tell bunch of important information like:",(0,i.jsxs)(s.aV,{children:[(0,i.jsx)(s.Li,{children:"We dont have this button, ask designed if he really wants new button or of we can reuse the ones we already have."}),(0,i.jsx)(s.Li,{children:"The profile page has the same layout as this other page, make sure to reuse the layout."}),(0,i.jsx)(s.Li,{children:"These are new component that we do not have, you will need to implement them."}),(0,i.jsx)(s.Li,{children:"Theming is missing in the ticket, but the app supports it everywhere, so it needs to be implemented."}),(0,i.jsx)(s.Li,{children:"You will be extending these auth related modules, this are their shortcoming, so beware of them or refactor them while you are touching the code."})]})]}),(0,i.jsxs)(s.Li,{children:[(0,i.jsx)(s.cK,{children:"Get feedback early"}),", by rule of thumb, if your ",(0,i.jsx)(s.cK,{children:"PR is bigger than 500 lines"}),", you have are getting into the danger territory, where you probably have a problem and you should apply some of the tricks above."]})]}),(0,i.jsxs)(s.P,{children:["All of these are rule of thump recommendations."," ",(0,i.jsx)(s.cK,{children:"Some of the problems might be partially taken care of by some meetings"}),"(like grooming, or some weekly product-developer syncs). The recommendation can be applied after you start working on the task, the main point is that"," ",(0,i.jsx)(s.cK,{children:"whenever you start seeing problems, you should be start talking about them"})," (thats what the stand-ups are for) and try to apply some of the rules above to fix them."]}),(0,i.jsx)(s.H1,{children:"Naming things"}),(0,i.jsx)(s.P,{children:"Use better names instead of comments"}),(0,i.jsx)(s.H2,{children:"Not great"}),(0,i.jsx)(s.EK,{language:"ts",children:"\n      // Use only on TV\n      const SCREEN_WIDTH_DIP = ...\n      // Use only on mobile\n      const SCREEN_WIDTH = ...\n\n      const HIDE_MODAL_TIMEOUT = 10 // seconds\n    "}),(0,i.jsx)(s.H2,{children:"Better"}),(0,i.jsx)(s.EK,{language:"ts",children:"\n      const SCREEN_WIDTH_MOBILE = ...\n      const SCREEN_WIDTH_TV = ...\n\n      const HIDE_MODAL_TIMEOUT_SECONDS = 10\n    "}),(0,i.jsx)(s.H1,{children:"Make sure the new code is in correct place"}),(0,i.jsx)(s.P,{children:"Always when adding new module/class/function/constant, think about if you placed it at the correct place. The most common mistake is to just place it where you are currently editing code, which is lots of the times correct, but lost of the time also incorrect."}),(0,i.jsxs)(s.P,{children:["Most code bases have some architecture that tries to separate things into logical units (folders, modules,"," ",(0,i.jsx)(s.HO,{}),"). These units are usually separated by:"]}),(0,i.jsxs)(s.aV,{children:[(0,i.jsxs)(s.Li,{children:["Concept",(0,i.jsxs)(s.aV,{children:[(0,i.jsxs)(s.Li,{children:["Pages, ui components, business logic, views, ",(0,i.jsx)(s.HO,{})]}),(0,i.jsxs)(s.Li,{children:["Home page, login page, register page, ",(0,i.jsx)(s.HO,{})]}),(0,i.jsxs)(s.Li,{children:["Controllers, services, mailers, views, ",(0,i.jsx)(s.HO,{})]})]})]}),(0,i.jsxs)(s.Li,{children:["Granularity/Specificity",(0,i.jsxs)(s.aV,{children:[(0,i.jsx)(s.Li,{children:"Specific formatting function used only in one component vs formatting function used in multiple components but only in one concept (on most admin pages, but never on product pages) vs general formatting function used everywhere."}),(0,i.jsx)(s.Li,{children:"Specific button only used on register page vs General button that is used on all pages."}),(0,i.jsx)(s.Li,{children:"Specific color transformation used only in header vs general add opacity function used across the app"})]})]})]}),(0,i.jsx)(s.H2,{children:"Example incorrect specificity"}),(0,i.jsx)(s.EK,{language:"ts",children:"\n      // src/styles/colors.ts\n      ...\n\n      // src/styles/app-theme.ts\n      const addOpacity(color: string, opacity: number): string = () => ...\n      const getModalBackground(): string = () => ...\n      const getMobileMenuBackground(): string = () => ...\n    "}),(0,i.jsxs)(s.P,{children:["Here we had incorrect mixture of specificity. There is general concept of ",(0,i.jsx)(s.Tx,{children:"colors"})," that contains colors/functions used everywhere in the app, but there also was more specific concept of"," ",(0,i.jsx)(s.Tx,{children:"app-theme"}),", that is more specific since it related to app theming and is basically sub concept of colors."]}),(0,i.jsx)(s.EK,{language:"ts",children:"\n      // src/styles/theme.ts\n      getModalBackground(): string\n      getMobileMenuBackground(): string\n\n      // src/styles/colors.ts\n      const addOpacity(color: string, opacity: number): string = () => ...\n      const getModalBackground(): string = () => ...\n      const getMobileMenuBackground(): string = () => ...\n    "})]}))}},function(e){e.O(0,[163,733,888,774,179],function(){return e(e.s=7946)}),_N_E=e.O()}]);