<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="icon" type="image/svg" href="/favicon.svg" class="jsx-1788f26f963801ea"/><link rel="alternate" type="application/rss+xml" title="RSS feed for petrhurtak.com" href="/rss/feed.xml" class="jsx-1788f26f963801ea"/><link rel="alternate" type="application/atom+xml" title="Atom feed for petrhurtak.com" href="/rss/atom.xml" class="jsx-1788f26f963801ea"/><link rel="alternate" type="application/feed+json" title="JSON Feed for petrhurtak.com" href="/rss/feed.json" class="jsx-1788f26f963801ea"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" class="jsx-1788f26f963801ea"/><title>Docker – petrhurtak.com</title><meta name="description" content="Short notes about the most useful Docker commands and examples of a common workflow." class="jsx-3660295720"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/e344c169fdbe9c5f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e344c169fdbe9c5f.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f2fec8308b1481ee.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f2fec8308b1481ee.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-6e375934f7db9407.js" defer=""></script><script src="/_next/static/chunks/pages/_app-73a777ca58ee6ff1.js" defer=""></script><script src="/_next/static/chunks/163-292c136d2e80f39f.js" defer=""></script><script src="/_next/static/chunks/733-8b179d7687f3748f.js" defer=""></script><script src="/_next/static/chunks/pages/articles/docker-1ae8fdb95185bbe1.js" defer=""></script><script src="/_next/static/OV2WtO7UMex4fkF0pVbp5/_buildManifest.js" defer=""></script><script src="/_next/static/OV2WtO7UMex4fkF0pVbp5/_ssgManifest.js" defer=""></script><style id="__jsx-1788f26f963801ea">body{margin:0}</style><style id="__jsx-3388121443">a.link{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;color:blue;text-decoration-thickness:0.5px;text-underline-offset:1px}a.link:visited{color:purple}</style><style id="__jsx-2798449809">.refractor{background:#f3f3f3!important;border:1px solid #dadada;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.code-inline.jsx-2798449809{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:auto}.code-inline.jsx-2798449809 .refractor{padding:1px!important;font-size:14px!important}.code-block.jsx-2798449809 .refractor{padding:8px!important;font-size:12px!important}.no-highlight.jsx-2798449809 .token{color:black!important;background:none!important}</style><style id="__jsx-3660295720">h1.jsx-3660295720{margin:0}.time-wrapper.jsx-3660295720{margin:0}time.jsx-3660295720{display:inline-block;padding-top:4px}.article-content.jsx-3660295720{padding-top:40px}.article-content.jsx-3660295720>*{margin:16px 0}.article-content.jsx-3660295720>*:first-child{margin-top:0}.article-content.jsx-3660295720>*:last-child{margin-bottom:0}.links.jsx-3660295720{margin:0;margin-top:24px}</style><style id="__jsx-835579187">body{overflow-y:scroll}.layout.jsx-835579187{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:grid;grid-template-areas:"header""main""footer";grid-template-rows:auto 1fr auto;grid-template-columns:1fr;min-width:400px;max-width:600px;min-height:100vh;margin:0 auto;padding:24px 16px}header.jsx-835579187{grid-area:header;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;padding-bottom:24px}main.jsx-835579187{grid-area:main;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}footer.jsx-835579187{grid-area:footer;padding-top:16px;text-align:center}</style></head><body><div id="__next"><div class="jsx-835579187 layout"><header class="jsx-835579187"><a class="link" href="/"><img width="20" height="20" src="/_next/static/media/logo.0f65ee71.svg" alt="petrhurtak.com site logo" class="jsx-835579187"/></a><a class="link" href="/">petrhurtak.com</a></header><main class="jsx-835579187"><article class="jsx-3660295720"><h1 class="jsx-3660295720">Docker</h1><p class="jsx-3660295720 time-wrapper"><time title="Publication date" dateTime="2020-09-21T00:00:00.000Z" class="jsx-3660295720">2020-Sep-21</time></p><div class="jsx-3660295720 article-content"><p>This article assumes basic Docker knowledge and is more of a shortlist of useful commands rather than beginners introduction.</p><h2>Dockerfile</h2><p>First, you will need a <span class="jsx-2798449809 code-inline no-highlight"><code class="refractor" style="display:inline">Dockerfile</code></span> file in your repository. Here is how simple one might look like.</p><div class="jsx-2798449809 code-block"><pre class="refractor language-docker"><code class="language-docker"><span class="token comment"># Base image</span>
<span class="token instruction"><span class="token keyword">FROM</span> node:12</span>

<span class="token comment"># Working directory inside of the container</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app/</span>

<span class="token comment"># Copy stuff inside of the container. The left path is the host OS, the</span>
<span class="token comment"># right path is inside of the container relative to the WORKDIR.</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./package.json .</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./index.js .</span>

<span class="token comment"># Run scripts or install dependencies</span>
<span class="token instruction"><span class="token keyword">RUN</span> npm install</span>

<span class="token comment"># Set environment variables</span>
<span class="token instruction"><span class="token keyword">ENV</span> NODE_ENV production</span>

<span class="token comment"># What command/binary to run when the image is started</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;node&quot;</span>]</span>
<span class="token comment"># What default arguments to supply to given ENTRYPOINT</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;index.js&quot;</span>]</span></code></pre></div><h2>Create commands</h2><div class="jsx-2798449809 code-block"><pre class="refractor language-bash"><code class="language-bash"><span class="token comment"># Build image</span>
<span class="token comment">#   -f/--file  Path to Dockerfile, default is &#x27;CWD/Dockerfile&#x27;</span>
<span class="token comment">#   -t/--tag   Name and optionally a tag in the &#x27;name:tag&#x27; format</span>
<span class="token function">docker</span> build <span class="token builtin class-name">.</span>

<span class="token comment"># List images</span>
<span class="token function">docker</span> image <span class="token function">ls</span>

<span class="token comment"># Run container</span>
<span class="token comment">#   -d/--detach   Run container in background and print container ID</span>
<span class="token comment">#   -p/--publish  Connect container port to host OS port, eg: &#x27;-p 8000:8000&#x27;</span>
<span class="token function">docker</span> run <span class="token operator">&lt;</span>IMAGE ID<span class="token operator">&gt;</span>

<span class="token comment"># List running containers</span>
<span class="token comment">#   -a/--all  Show all containers, default shows just running</span>
<span class="token function">docker</span> <span class="token function">ps</span>

<span class="token comment"># Run a command in a running container</span>
<span class="token comment">#   -i, --interactive  Keep STDIN open even if not attached</span>
<span class="token comment">#   -t, --tty          Allocate a pseudo-TTY</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> <span class="token operator">&lt;</span>CONTAINER ID<span class="token operator">&gt;</span> /bin/sh</code></pre></div><h2>Cleanup commands</h2><div class="jsx-2798449809 code-block"><pre class="refractor language-bash"><code class="language-bash"><span class="token comment"># List containers</span>
<span class="token comment">#   --all  Shows also stopped ones</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">--all</span>

<span class="token comment"># Stop the running container</span>
<span class="token function">docker</span> container stop <span class="token operator">&lt;</span>CONTAINER ID<span class="token operator">&gt;</span>

<span class="token comment"># Remove container</span>
<span class="token comment">#   --force  Remove running containers</span>
<span class="token function">docker</span> container <span class="token function">rm</span> <span class="token operator">&lt;</span>CONTAINER ID<span class="token operator">&gt;</span>

<span class="token comment"># List images</span>
<span class="token function">docker</span> image <span class="token function">ls</span>

<span class="token comment"># Remove images</span>
<span class="token function">docker</span> image <span class="token function">rm</span> <span class="token operator">&lt;</span>IMAGE ID<span class="token operator">&gt;</span></code></pre></div><h2>Example workflow</h2><div class="jsx-2798449809 code-block"><pre class="refractor language-bash"><code class="language-bash"><span class="token comment"># Take Dockerfile and build an image</span>
$ <span class="token function">docker</span> build <span class="token builtin class-name">.</span>
Sending build context to Docker daemon  <span class="token number">2</span>.008MB
<span class="token punctuation">..</span>.
Successfully built ea5c328aef35

<span class="token comment"># List images</span>
$ <span class="token function">docker</span> image <span class="token function">ls</span>
REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE
<span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>              <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>              ea5c328aef35        About a minute ago   919MB

<span class="token comment"># Run the container</span>
$ <span class="token function">docker</span> run ea5c328aef35
Example app listening at http://localhost:8000

<span class="token comment"># List running containers</span>
$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES
08d6c527fe82        ea5c328aef35        <span class="token string">&quot;node index.js&quot;</span>     About a minute ago   Up About a minute                       mystifying_hellman

<span class="token comment"># Connect to running container and execute command inside of it.</span>
<span class="token comment"># Command we execute is &#x27;/bin/bash&#x27;, so we</span>
<span class="token comment"># can use bash to explore container contents.</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 08d6c527fe82 /bin/bash
root@08d6c527fe82:/app<span class="token comment"># ls</span>
index.js  node_modules  packag
root@08d6c527fe82:/app<span class="token comment"># exit</span>

<span class="token comment"># Stop and remove the running container</span>
$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
08d6c527fe82        ea5c328aef35        <span class="token string">&quot;node index.js&quot;</span>     <span class="token number">3</span> seconds ago       Up <span class="token number">3</span> seconds                            festive_lehmann

$ <span class="token function">docker</span> container stop 08d6c527fe82
08d6c527fe82
$ <span class="token function">docker</span> container <span class="token function">rm</span> 08d6c527fe82
08d6c527fe82

$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

<span class="token comment"># Remove the image</span>
$ <span class="token function">docker</span> image <span class="token function">ls</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
<span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>              <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>              ea5c328aef35        <span class="token number">48</span> minutes ago      919MB

$ <span class="token function">docker</span> image <span class="token function">rm</span> ea5c328aef35
Deleted: sha256:ea5c328aef35edf1a19e10fa5d7a62f11d9e61f76db01d86c7c94da5f7432185
<span class="token punctuation">..</span>.</code></pre></div></div></article><p class="jsx-3660295720 links"><a class="link" rel="noopener noreferrer" target="_blank" href="https://github.com/hurtak/petrhurtak.com/tree/main/articles/2020-09-21--docker/index.tsx">Edit on GitHub</a> <!-- -->·<!-- --> <a class="link" rel="noopener noreferrer" target="_blank" href="https://x.com/search?q=https%3A%2F%2Fpetrhurtak.com%2Farticles%2Fdocker">Discuss on X</a> </p></main><footer class="jsx-835579187">2015<!-- -->–<!-- -->2026<br class="jsx-835579187"/>Written by <!-- -->Petr Hurtak</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"articleBlog":{"id":"docker","type":"ARTICLE_BLOG_VISIBLE","title":"Docker","description":"Short notes about the most useful Docker commands and examples of a common workflow.","datePublication":1600646400000,"articlePath":"/home/runner/work/petrhurtak.com/petrhurtak.com/articles/2020-09-21--docker/metadata.json","articleDirectory":"2020-09-21--docker","slug":"docker"}},"__N_SSG":true},"page":"/articles/docker","query":{},"buildId":"OV2WtO7UMex4fkF0pVbp5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>